apiVersion: platform.confluent.io/v1beta1
kind: SchemaRegistry
metadata:
  name: schemaregistry-non-kraft
  namespace: confluent
spec:
  replicas: 3
  image:
    application: confluentinc/cp-schema-registry:7.4.0
    init: confluentinc/confluent-init-container:2.6.0
  dependencies: 
    kafka:
      bootstrapEndpoint: osk-non-kraft-sr-ops-kafka-bootstrap.srops.svc.cluster.local:9092
  authentication:
    type: basic
    basic:
      secretRef: basicwithrolesr
  tls:
    autoGeneratedCerts: true
  configOverrides:
    server:
      - confluent.schema.registry.authorizer.class=io.confluent.kafka.schemaregistry.security.authorizer.schemaregistryacl.SchemaRegistryAclAuthorizer
      - resource.extension.class=io.confluent.kafka.schemaregistry.security.SchemaRegistrySecurityResourceExtension
      - confluent.schema.registry.auth.mechanism=JETTY_AUTH
      - authentication.method=BASIC
      - authentication.roles=admin,user,developer
      - authentication.realm=SchemaRegistry-Props